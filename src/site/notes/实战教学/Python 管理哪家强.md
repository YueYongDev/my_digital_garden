---
{"title":"Python ç®¡ç†å“ªå®¶å¼ºï¼Ÿ","categories":"å®æˆ˜æ•™å­¦","tags":["python,ç¯å¢ƒç®¡ç†"],"dg-publish":true,"permalink":"/å®æˆ˜æ•™å­¦/Python ç®¡ç†å“ªå®¶å¼º/","dgPassFrontmatter":true}
---


![Pipenv - The Officially Recommended Python Packaging Tool](https://cdn.ytools.xyz/uPic/006tKfTcgy1g13dkeueaoj30k009g75s.jpg)

ä¹‹å‰çš„æ–‡ç« [[å®æˆ˜æ•™å­¦/macä¸‹åˆ©ç”¨pyenvç®¡ç†å¤šä¸ªç‰ˆæœ¬çš„python\|ã€Šåˆ©ç”¨pyenvç®¡ç†å¤šä¸ªç‰ˆæœ¬çš„pythonã€‹]]æè¿‡pyenv æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ Python ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€å°ç”µè„‘ä¸Šå®‰è£…å¤šä¸ªç‰ˆæœ¬çš„ Python ï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸ç®€å•ã€‚Macç³»ç»Ÿçš„ç”µè„‘ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥å®‰è£…äº†ï¼š

```bash
brew install pyenv
```

pyenv çš„å®‰è£…å’Œä½¿ç”¨è¯¦è§å¼€ç¯‡æåˆ°çš„æ–‡ç« ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚

ä»Šå¤©ä¸»è¦æ˜¯æƒ³ä»‹ç»å¦ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ Python å·¥å…·â€”â€”**"Pipenv"**

## Pipenvæ˜¯ä»€ä¹ˆï¼Ÿ

> **Pipenv** is a tool that aims to bring the best of all packaging worlds (bundler, composer, npm, cargo, yarn, etc.) to the Python world. *Windows is a first-class citizen, in our world.*
>
> It automatically creates and manages a virtualenv for your projects, as well as adds/removes packages from your `Pipfile` as you install/uninstall packages. It also generates the ever-important `Pipfile.lock`, which is used to produce deterministic builds.

ä¸Šæ®µå¼•ç”¨è‡ªå®˜æ–¹æ–‡æ¡£ï¼Œç®€å•æ¥è¯´å°±æ˜¯ Pipenv æ˜¯å¸Œæœ›æˆä¸º Python ç•Œæœ€å¥½çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæˆä¸º Python ç•Œçš„ *npm*ã€‚ä½ å¯ä»¥ä½¿ç”¨ Pipenv è¿™ä¸€ä¸ªå·¥å…·æ¥å®‰è£…ã€å¸è½½ã€è·Ÿè¸ªå’Œè®°å½•ä¾èµ–æ€§ï¼Œå¹¶åˆ›å»ºã€ä½¿ç”¨å’Œç»„ç»‡ä½ çš„è™šæ‹Ÿç¯å¢ƒã€‚
å½“ä½ ä½¿ç”¨å®ƒå¯åŠ¨ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒçš„è¯ï¼ŒPipenv å°†è‡ªåŠ¨ä¸ºè¯¥é¡¹ç›®åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚
Pipenv ä½¿ç”¨ `Pipfile` å’Œ `Pipfile.lock` æ¥ç®¡ç†ä¾èµ–åŒ…ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨ pipenv æ·»åŠ æˆ–åˆ é™¤åŒ…æ—¶ï¼Œè‡ªåŠ¨ç»´æŠ¤ Pipfile æ–‡ä»¶ï¼ŒåŒæ—¶ç”Ÿæˆ Pipfile.lock æ¥é”å®šå®‰è£…åŒ…çš„ç‰ˆæœ¬å’Œä¾èµ–ä¿¡æ¯ï¼Œé¿å…æ„å»ºé”™è¯¯ã€‚ç›¸æ¯”pipéœ€è¦æ‰‹åŠ¨ç»´æŠ¤requirements.txt ä¸­çš„å®‰è£…åŒ…å’Œç‰ˆæœ¬ï¼Œå…·æœ‰å¾ˆå¤§çš„è¿›æ­¥ã€‚

## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Pipenv

è®¾æƒ³ä¸€ä¸ªåœºæ™¯ï¼šä½ æ‰‹å¤´æœ‰å¤šä¸ªå¼€å‘é¡¹ç›®ï¼Œå…¶ä¸­é¡¹ç›® A å’Œé¡¹ç›® B è¦æ±‚ç”¨ Python3ï¼Œé¡¹ç›®Céœ€è¦ç”¨ Python2ï¼Œè€Œé¡¹ç›® A å’Œé¡¹ç›® B åˆè¦æ±‚ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ã€‚

è¿™ä¸ªæ—¶å€™ï¼Œä¸ºäº†æ»¡è¶³ç‰ˆæœ¬çš„ä¸åŒæˆ‘ä»¬éœ€è¦ä½¿ç”¨ Pyenv å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„ Python ï¼ŒåŒæ—¶ä¸ºäº†ä½¿ä¸åŒé¡¹ç›®ä¹‹é—´éš”ç¦»å¼€æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Pipenv åˆ›å»ºè™šæ‹Ÿçš„å¼€å‘ç¯å¢ƒã€‚

é‚£æœ‰çš„äººå°±è¦é—®äº†ï¼Œ`virtualenv`ä¸å°±å¯ä»¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒäº†å—ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨ Pipenv ï¼Œè¿™é‡Œå…ˆå–ä¸ªå…³å­ï¼Œæ–‡æœ«æˆ‘å†æ¥æ¯”è¾ƒè¿™äº›å¸¸è§å·¥å…·ä¹‹é—´çš„å·®å¼‚æ€§ã€‚

## ä½¿ç”¨ Pipenv

### å®‰è£… Pipenv

å¦‚æœä½ æ˜¯Macç”µè„‘ï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨Homebrewæ¥å®‰è£…ã€‚

```bash
brew install pipenv
```

å¦‚æœä¸æ˜¯Macç”µè„‘ï¼Œå»ºè®® ä½¿ç”¨Python3çš„pip3 å®‰è£…ï¼š

```bash
pip3 install pipenv
```

æ‰§è¡Œpipenvï¼Œå¯ä»¥æŸ¥çœ‹pipenvçš„å¸®åŠ©ä¿¡æ¯ï¼š

```bash
pipenv
```

å¦‚æœå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œå°±è¯´æ˜å®‰è£…æˆåŠŸäº†ï¼š

![](https://cdn.ytools.xyz/uPic/006tKfTcgy1g13bfa496rj30vo0kadqb.jpg)

### ä¸ºé¡¹ç›®åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

é»˜è®¤åœ°ï¼Œè™šæ‹Ÿç¯å¢ƒä¼šåˆ›å»ºåœ¨`~/.local/share/virtualenvs`ç›®å½•é‡Œé¢ã€‚
å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ä¿å­˜è™šæ‹Ÿç¯å¢ƒç›®å½•ï¼ˆ.venvï¼‰ï¼Œéœ€è¦åœ¨ `.bashrc` æˆ– `.bash_profile` ä¸­é…ç½®å¦‚ä¸‹ï¼š

```
export PIPENV_VENV_IN_PROJECT=1
```

è¦æƒ³ä½¿é…ç½®ç”Ÿæ•ˆï¼Œæ‰§è¡Œä¸‹`source ~/.bashrc`æˆ–è€…`source ~/.bash_profile`å³å¯ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚
æ¥ä¸‹æ¥æˆ‘ä»¬ä¸ºé¡¹ç›®åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚

```
mkdir pipenv_demo		
cd pipenv_demo
pipenv --python 3.6.7 # ä¸ºå½“å‰åˆå§‹åŒ–ä¸€ä¸ªç‰ˆæœ¬ä¸º 3.6.7 çš„pythonç¯å¢ƒ
```

### é¦–æ¬¡è¿è¡Œ

å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡åœ¨é¡¹ç›®ä¸­è¿è¡Œ `pipenv` å‘½ä»¤çš„è¯ï¼Œä¼šåœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `Pipfile` çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ç±»ä¼¼ä¸‹é¢è¿™æ ·ã€‚

```
[[source\|source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
requests-html = "*"

[dev-packages]

[requires]
python_version = "3.7"
```

è¿™ä¸ªæ–‡ä»¶å°±ç±»ä¼¼äº maven ä¸­çš„ `pom.xml`ã€npm ä¸­çš„ `package.json` æ–‡ä»¶ã€‚å¦‚æœè¿è¡Œè¿‡installã€updateç­‰å‘½ä»¤çš„è¯ï¼Œè¿˜ä¼šåˆ›å»ºä¸€ä¸ª`Pipfile.lock`æ–‡ä»¶ï¼Œç±»ä¼¼npmä¸­çš„lockæ–‡ä»¶ã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶å°±æ˜¯pipenvç”¨äºç®¡ç†ç¬¬ä¸‰æ–¹åº“çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœåŒæ—¶ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶çš„è¯ï¼Œéœ€è¦å°†å®ƒä»¬ä¹ŸåŠ å…¥è¿›å»ã€‚

> Tipsï¼šå¯¹äºè¿™ä¸ªæ–‡ä»¶æˆ‘ä»¬éœ€è¦å…ˆåšä¸€ä»¶äº‹ï¼Œå°±æ˜¯æ›´æ”¹ **[[source]]** ä¸­çš„ url ä¸ºå›½å†…é•œåƒã€‚
>
> ```
> [[source]]
>  url = "https://pypi.tuna.tsinghua.edu.cn/simple"
> ```

### å¸¸ç”¨å‘½ä»¤

#### å®‰è£…é¡¹ç›®ä¾èµ–

å¦‚æœæˆ‘æƒ³åœ¨é¡¹ç›®ä¸­å®‰è£…requestsè¿™ä¸ªåŒ…ï¼Œè¿è¡Œï¼š

```
pipenv install requests
```

å¦‚æœéœ€è¦æŒ‡å®šå…·ä½“ç‰ˆæœ¬å·ï¼Œå¯ä»¥è¿™æ ·ï¼š

```
pipenv install requests==2.13.0
```


å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œpipenvçš„è¯ï¼Œä¼šå…ˆåˆ›å»ºPipfileæ–‡ä»¶ï¼Œå¦åˆ™ä¼šä¿®æ”¹Pipfileæ–‡ä»¶ã€‚

è¯¥å‘½ä»¤è¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨å‚æ•°-dæˆ–--devï¼Œç”¨äºå®‰è£…ä»…ä¾›å¼€å‘ä½¿ç”¨çš„åŒ…ã€‚

> Tipsï¼šç”¨ git ç®¡ç†é¡¹ç›®æ—¶å€™ï¼Œè¦æŠŠ `Pipfile` å’Œ `Pipfile.lock` åŠ å…¥ç‰ˆæœ¬è·Ÿè¸ªã€‚è¿™æ · clone äº†è¿™ä¸ªé¡¹ç›®çš„åŒå­¦ï¼Œåªéœ€è¦æ‰§è¡Œ
>
> ```
> pipenv install
> ```
>
> å°±å¯ä»¥å®‰è£…æ‰€æœ‰çš„Pipfileä¸­ [packages]éƒ¨åˆ†çš„åŒ…äº†ï¼Œå¹¶ä¸”è‡ªåŠ¨ä¸ºé¡¹ç›®åœ¨è‡ªå·±ç”µè„‘ä¸Šåˆ›å»ºäº†è™šæ‹Ÿç¯å¢ƒã€‚

#### å¸è½½æŸä¸ªä¾èµ–

ç›¸åº”çš„è¿˜æœ‰å‘½ä»¤æ¥å¸è½½ç¬¬ä¸‰æ–¹åŒ…ï¼Œè¯¥å‘½ä»¤è¿˜æœ‰ä¸¤ä¸ªå‚æ•°`--all`å’Œ`--all-dev`ç”¨äºå¸è½½æ‰€æœ‰åŒ…å’Œæ‰€æœ‰å¼€å‘åŒ…ã€‚

```
pipenv uninstall requests
```

#### æ›´æ–°é¡¹ç›®ä¾èµ–

æŸ¥çœ‹æ‰€æœ‰éœ€è¦æ›´æ–°çš„åŒ…ï¼š

```
pipenv update --outdated
```

æ›´æ–°æ‰€æœ‰åŒ…ï¼š

```
pipenv update
```

æ›´æ–°æŒ‡å®šçš„åŒ…ï¼š

```
pipenv update <åŒ…å>
```

#### å…¶ä»–å‘½ä»¤

```
pipenv -h  # æŸ¥çœ‹å¸®åŠ©
pipenv graph  # æŸ¥çœ‹å·²å®‰è£…çš„åŒ…
pipenv shell  # å¯åŠ¨shell
pipenv run python hello.py  # è¿è¡Œè„šæœ¬
```

### Python ç®¡ç†å“ªå®¶å¼ºï¼Ÿ

è¿˜è®°å¾—åœ¨æœ€å¼€å§‹æå‡ºçš„é—®é¢˜å—ï¼Ÿæ˜æ˜`virtualenv`å°±å¯ä»¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒäº†å—ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨ Pipenv å‘¢ï¼Ÿ

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ¨ªå‘å¯¹æ¯”ä¸‹å‡ ä¸ªå¸¸è§çš„å®¹æ˜“å¼„æ··çš„ python ç®¡ç†å·¥å…·ï¼ˆæˆ‘åœ¨åˆå­¦çš„æ—¶å€™æ€»æ˜¯åˆ†ä¸æ¸…ğŸ˜‚ï¼‰

| å·¥å…·              | ä»‹ç»                                                         | åŸç†         |
| ----------------- | ------------------------------------------------------------ | ------------ |
| pip               | åŒ…ç®¡ç†å·¥å…·                                                   |              |
| virtualenv        | è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·                                             | åˆ‡æ¢ç›®å½•     |
| virtualenvwrapper | è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·åŠ å¼ºç‰ˆ                                       |              |
| pyenv             | pythonç‰ˆæœ¬ç®¡ç†å·¥å…·                                           | ä¿®æ”¹ç¯å¢ƒå˜é‡ |
| pyenv-virtualenv  | è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·                                             |              |
| pipenv            | é¡¹ç›®ç¯å¢ƒç®¡ç†å·¥å…·                                             |              |
| anaconda          | ä¸€ä¸ªåŒ…å«180+çš„ç§‘å­¦åŒ…åŠå…¶ä¾èµ–é¡¹çš„å‘è¡Œç‰ˆæœ¬ï¼ˆä¸åªæ˜¯ Python å¯ç”¨ï¼‰ |              |

åŒæ—¶åœ¨æ¨èä¸€ä¸ªæˆ‘åœ¨ stackoverflow ä¸Šçœ‹åˆ°çš„å›ç­”ï¼š[What is the difference between pyenv, virtualenv, anaconda?](https://stackoverflow.com/questions/38217545/what-is-the-difference-between-pyenv-virtualenv-anaconda/39928067#39928067)

### å®è·µå»ºè®®ï¼š

å»ºè®®å›¢é˜Ÿå†…å¼€å‘äººå‘˜ï¼Œåœ¨è‡ªå·±ç”µè„‘ä¸Šéƒ½å®‰è£… pyenv å’Œ pipenv ã€‚Pipfile å’Œ Pipfile.lock åŠ å…¥ç‰ˆæœ¬è·Ÿè¸ªï¼Œ.venv ä¸è¦åŠ å…¥ç‰ˆæœ¬ç®¡ç†ã€‚ä¸ºè‡ªå·±çš„æ¯ä¸€ä¸ªé¡¹ç›®å»ºç«‹ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒã€‚

### å‚è€ƒ

1. [What is the difference between pyenv, virtualenv, anaconda?](https://stackoverflow.com/questions/38217545/what-is-the-difference-between-pyenv-virtualenv-anaconda/39928067#39928067)
2. [åˆ©ç”¨pipenvå’Œpyenvç®¡ç†å¤šä¸ªç›¸äº’ç‹¬ç«‹çš„Pythonè™šæ‹Ÿå¼€å‘ç¯å¢ƒ](https://blog.csdn.net/liuchunming033/article/details/79582617)
3. [pipenvå¿«é€Ÿå…¥é—¨](https://blog.csdn.net/u011054333/article/details/82891847)

